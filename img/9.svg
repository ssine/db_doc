<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="485px" preserveAspectRatio="none" style="width:381px;height:485px;" version="1.1" viewBox="0 0 381 485" width="381px" zoomAndPan="magnify"><defs><filter height="300%" id="f1l6avvkvi8jln" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="25" x2="25" y1="89.1201" y2="394.9097"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="101" x2="101" y1="89.1201" y2="394.9097"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="173" x2="173" y1="89.1201" y2="394.9097"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="275.5" x2="275.5" y1="89.1201" y2="394.9097"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="351.5" x2="351.5" y1="89.1201" y2="394.9097"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="8" y="86.0439">玩家</text><ellipse cx="25" cy="13" fill="#FEFECE" filter="url(#f1l6avvkvi8jln)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M25,21 L25,48 M12,29 L38,29 M25,48 L12,63 M25,48 L38,63 " fill="none" filter="url(#f1l6avvkvi8jln)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="8" y="409.9536">玩家</text><ellipse cx="25" cy="423.0298" fill="#FEFECE" filter="url(#f1l6avvkvi8jln)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M25,431.0298 L25,458.0298 M12,439.0298 L38,439.0298 M25,458.0298 L12,473.0298 M25,458.0298 L38,473.0298 " fill="none" filter="url(#f1l6avvkvi8jln)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="63" y="86.0439">第三方支付</text><ellipse cx="101" cy="54" fill="#FEFECE" filter="url(#f1l6avvkvi8jln)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="89" x2="113" y1="68" y2="68"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="63" y="409.9536">第三方支付</text><ellipse cx="101" cy="429.0298" fill="#FEFECE" filter="url(#f1l6avvkvi8jln)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="89" x2="113" y1="443.0298" y2="443.0298"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="156.5" y="86.0439">前端</text><path d="M153,42 L153,66 M153,54 L170,54 " fill="none" filter="url(#f1l6avvkvi8jln)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="182" cy="54" fill="#FEFECE" filter="url(#f1l6avvkvi8jln)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="156.5" y="409.9536">前端</text><path d="M153,417.0298 L153,441.0298 M153,429.0298 L170,429.0298 " fill="none" filter="url(#f1l6avvkvi8jln)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="182" cy="429.0298" fill="#FEFECE" filter="url(#f1l6avvkvi8jln)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="258.5" y="86.0439">后端</text><ellipse cx="275.5" cy="54" fill="#FEFECE" filter="url(#f1l6avvkvi8jln)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="271.5,42,277.5,37,275.5,42,277.5,47,271.5,42" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="258.5" y="409.9536">后端</text><ellipse cx="275.5" cy="429.0298" fill="#FEFECE" filter="url(#f1l6avvkvi8jln)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="271.5,417.0298,277.5,412.0298,275.5,417.0298,277.5,422.0298,271.5,417.0298" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="327.5" y="86.0439">数据库</text><path d="M333.5,34 C333.5,24 351.5,24 351.5,24 C351.5,24 369.5,24 369.5,34 L369.5,60 C369.5,70 351.5,70 351.5,70 C351.5,70 333.5,70 333.5,60 L333.5,34 " fill="#FEFECE" filter="url(#f1l6avvkvi8jln)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M333.5,34 C333.5,44 351.5,44 351.5,44 C351.5,44 369.5,44 369.5,34 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="327.5" y="409.9536">数据库</text><path d="M333.5,423.0298 C333.5,413.0298 351.5,413.0298 351.5,413.0298 C351.5,413.0298 369.5,413.0298 369.5,423.0298 L369.5,449.0298 C369.5,459.0298 351.5,459.0298 351.5,459.0298 C351.5,459.0298 333.5,459.0298 333.5,449.0298 L333.5,423.0298 " fill="#FEFECE" filter="url(#f1l6avvkvi8jln)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M333.5,423.0298 C333.5,433.0298 351.5,433.0298 351.5,433.0298 C351.5,433.0298 369.5,433.0298 369.5,423.0298 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><polygon fill="#A80036" points="161.5,118.8745,171.5,122.8745,161.5,126.8745,165.5,122.8745" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="25" x2="167.5" y1="122.8745" y2="122.8745"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="32" y="118.0181">请求充值</text><polygon fill="#A80036" points="263.5,150.6289,273.5,154.6289,263.5,158.6289,267.5,154.6289" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="173.5" x2="269.5" y1="154.6289" y2="154.6289"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="180.5" y="149.7725">发送充值请求</text><polygon fill="#A80036" points="339.5,182.3833,349.5,186.3833,339.5,190.3833,343.5,186.3833" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="345.5" y1="186.3833" y2="186.3833"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="282.5" y="181.5269">启动事务</text><polygon fill="#A80036" points="112,214.1377,102,218.1377,112,222.1377,108,218.1377" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="106" x2="274.5" y1="218.1377" y2="218.1377"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="118" y="213.2813">转到充值界面</text><polygon fill="#A80036" points="89,245.8921,99,249.8921,89,253.8921,93,249.8921" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="25" x2="95" y1="249.8921" y2="249.8921"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="32" y="245.0356">进行支付</text><polygon fill="#A80036" points="263.5,277.6465,273.5,281.6465,263.5,285.6465,267.5,281.6465" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="101" x2="269.5" y1="281.6465" y2="281.6465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="108" y="276.79">支付结果</text><polygon fill="#A80036" points="339.5,309.4009,349.5,313.4009,339.5,317.4009,343.5,313.4009" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="345.5" y1="313.4009" y2="313.4009"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="282.5" y="308.5444">修改数据</text><polygon fill="#A80036" points="339.5,341.1553,349.5,345.1553,339.5,349.1553,343.5,345.1553" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="345.5" y1="345.1553" y2="345.1553"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="282.5" y="340.2988">结束事务</text><polygon fill="#A80036" points="184.5,372.9097,174.5,376.9097,184.5,380.9097,180.5,376.9097" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="178.5" x2="274.5" y1="376.9097" y2="376.9097"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="190.5" y="372.0532">充值成功</text><!--
@startuml 9

actor 玩家
entity 第三方支付
boundary 前端
control 后端
database 数据库

玩家 -> 前端: 请求充值
前端 -> 后端: 发送充值请求
后端 -> 数据库: 启动事务

第三方支付 <- 后端: 转到充值界面

玩家 -> 第三方支付: 进行支付

第三方支付 -> 后端: 支付结果

后端 -> 数据库: 修改数据
后端 -> 数据库: 结束事务


前端 <- 后端: 充值成功

@enduml

PlantUML version 1.2018.12(Sun Oct 21 18:15:15 CST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_151-b12
Operating System: Windows 10
OS Version: 10.0
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>