<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta name="generator" content="Madoko, version 1.1.4" />
  <meta name="viewport" content="initial-scale=1.0" />
  <title>MMORPG设计文档</title>
  <style type="text/css"  class="link">
  /*# sourceURL=madoko.css */
  
  .madoko .toc>.tocblock .tocblock .tocblock {
    margin-left: 2.25em;
  }
  .madoko .toc>.tocblock .tocblock {
    margin-left: 1.5em;
  }
  .madoko .toc-contents>.tocblock>.tocitem {
    font-weight: bold;
  }
  .madoko .toc {
    margin-top: 1em;
  }
  .madoko p.para-continue {
    margin-bottom: 0pt;
  }
  .madoko .para-block+p {
    margin-top: 0pt;
  }
  .madoko ul.para-block, .madoko ol.para-block {
    margin-top: 0pt;
    margin-bottom: 0pt;
  }
  .madoko ul.para-end, .madoko ol.para-end {
    margin-bottom: 1em;
  }
  .madoko dl {
    margin-left: 0em;
  }
  .madoko blockquote {
    font-style: italic;
  }
  .madoko a.localref {
    text-decoration: none;
  }
  .madoko a.localref:hover {
    text-decoration: underline;
  }
  .madoko .footnotes {
    font-size: smaller;
    margin-top: 2em;
  }
  .madoko .footnotes hr {
    width: 50%;
    text-align: left;
  }
  .madoko .footnote { 
    margin-left: 1em;
  }
  .madoko .footnote-before {
    margin-left: -1em;
    width: 1em;
    display: inline-block;
  }
  .madoko .align-center, .madoko .align-center>p {
    text-align: center !important;
  }
  .madoko .align-center pre {
    text-align: left;
  }
  .madoko .align-center>* {
    margin-left: auto !important;
    margin-right: auto !important;
  }
  .madoko .align-left, .madoko .align-left>p {
    text-align: left !important;
  }
  .madoko .align-left>* {
    margin-left: 0pt !important;
    margin-right: auto !important;
  }
  .madoko .align-right, .madoko .align-right>p {
    text-align: right !important;
  }
  .madoko .align-right>* {
    margin-left: auto !important;
    margin-right: 0pt !important;
  }
  .madoko .align-center>table,
  .madoko .align-left>table,
  .madoko .align-right>table {
    text-align: left !important;
  }
  .madoko .equation-before {
    float: right;
  }
  .madoko .bibitem {
    font-size: smaller;
  }
  .madoko .bibsearch {
    font-size: x-small;
    text-decoration:none;
    color: black;
    font-family: "Segoe UI Symbol", Symbola, serif;
  }
  .madoko .block, .madoko .figure, .madoko .bibitem, .madoko .equation, .madoko div.math {
    margin-top: 1ex;
    margin-bottom: 1ex;
  }
  .madoko .figure {
    padding: 0.5em;
    margin-left: 0pt;
    margin-right: 0pt;
  }
  .madoko .hidden {
    display: none;
  }
  .madoko .invisible {
    visibility: hidden;
  }
  .madoko.preview .invisible {
    visibility: visible;
    opacity: 0.5;
  }
  .madoko code.code, .madoko span.code {
    white-space: pre-wrap;
  }
  .madoko hr, hr.madoko {
    border: none;
    border-bottom: black solid 1px;
    margin-bottom: 0.5ex;
  }
  .madoko .framed>*:first-child {
    margin-top: 0pt;
  }
  .madoko .framed>*:last-child {
    margin-bottom: 0pt;
  }
  .madoko ul.list-style-type-dash {
      list-style-type: none !important;
  }
  .madoko ul.list-style-type-dash > li:before {
      content: "\2013"; 
      position: absolute;
      margin-left: -1em; 
  }
  .madoko table.madoko {
    border-collapse: collapse;
  }
  .madoko td, .madoko th {
    padding: 0ex 0.5ex;
    margin: 0pt;
    vertical-align: top;
  }
  .madoko .cell-border-left {
    border-left: 1px solid black;
  }
  .madoko .cell-border-right {
    border-right: 1px solid black;
  }
  .madoko thead>tr:first-child>.cell-line,
  .madoko tbody:first-child>tr:first-child>.cell-line {
    border-top: 1px solid black;
    border-bottom: none;
  }
  .madoko .cell-line, .madoko .cell-double-line {
    border-bottom: 1px solid black;
    border-top: none;
  }
  .madoko .cell-double-line {
    border-top: 1px solid black;
    padding-top: 1.5px !important;
  }
  .madoko .input-mathpre .MathJax_Display {
    text-align: left !important;
  }
  .madoko div.input-mathpre {
    text-align: left;
    margin-top: 1.5ex;
    margin-bottom: 1ex;
  }
  .madoko .math-rendering {
    text-align: left;
    white-space: pre;
    color: gray;
  }
  .madoko .mathdisplay {
    text-align: center;
  }
  .madoko .pretty table {
    border-collapse: collapse;
  }
  .madoko .pretty td {
    padding: 0em;
  }
  .madoko .pretty td.empty {
    min-width: 1.5ex;
  }
  .madoko .pretty td.expander {
    width: 100em;
  }
  body.madoko, .madoko .serif {
    font-family: Cambria,"Times New Roman","Liberation Serif","Times",serif;
  }
  .madoko .sans-serif {
    font-family: "Calibri", "Optima", sans-serif;
  }
  .madoko .symbol {
    font-family: "Segoe UI Symbol", Symbola, serif;
  }
  body.madoko {  
    -webkit-text-size-adjust: 100%;       
    text-rendering: optimizeLegibility;
  }
  body.madoko {
    max-width: 88ex; 
    margin: 1em auto;
    padding: 0em 2em;  
  }
  body.preview.madoko {
    padding: 0em 1em;
  }
  .madoko p {
    text-align: justify;
  }
  .madoko h1, .madoko h2, .madoko h3, .madoko h4 { 
    margin-top: 1.22em; 
    margin-bottom: 1ex;
  }
  .madoko h1+p, .madoko h2+p, .madoko h3+p, .madoko h4+p, .madoko h5+p  { 
    margin-top: 1ex;    
  }
  .madoko h5, .madoko h6 { 
    margin-top: 1ex;
    font-size: 1em;
  }
  .madoko h5 { 
    margin-bottom: 0.5ex;
  }
  .madoko h5 + p {
    margin-top: 0.5ex;
  }
  .madoko h6 { 
    margin-bottom: 0pt;
  }
  .madoko h6 + p {
    margin-top: 0pt;
  }
  .madoko pre, .madoko code, .madoko kbd, .madoko samp, .madoko tt, 
  .madoko .monospace, .madoko .token-indent, .madoko .reveal pre, .madoko .reveal code, .madoko .email {
    font-family: Consolas,"Andale Mono WT","Andale Mono",Lucida Console,Monaco,monospace,monospace;
    font-size: 0.85em;
  }
  .madoko pre code, .madoko .token-indent {
    font-size: 0.95em;
  }
  .madoko pre code {
    font-family: inherit !important;
  }
  .madoko ol.linenums li {
    background-color: white;
    list-style-type: decimal;
  }
  .madoko .remote {
    background-color: #F0FFF0;
  }
  .madoko .remote + * {
    margin-top: 0pt;
  }
  @media print {
    body.madoko {
      font-size: 10pt;
    }
    @page {
      margin: 1in 1.5in;
    }
  }
  @media only screen and (max-device-width:1024px) {
    body.madoko {
      padding: 0em 0.5em;    
    }
    .madoko li {
      text-align: left;
    }
  }
  
    </style>
  
  </head>
<body class="madoko">

<div class="body madoko" style="line-adjust:0">

<div class="titleblock align-center para-block" data-line="3" style="text-align:center;line-adjust:0">
<div class="titleheader align-center" data-line="3" style="text-align:center;line-adjust:0">
<div class="title para-block" data-line="3" style="font-size:xx-large;font-weight:bold;margin-bottom:0.5ex;line-adjust:0"><span data-line="3"></span>MMORPG设计文档</div></div></div><span data-line="5"></span>
<nav class="toc toc-contents"><h2 id="sec-contents" class="clearnum h1 heading-contents" data-heading-depth="1" style="display:block">Contents</h2>
<div class="tocblock tocblock1">
<div class="tocitem tocitem1" data-toc-target-elem="h1" data-toc-target="section" data-toc-depth="1" data-toc-line="[1]{.heading-label}.&#8194;\u9879\u76EE\u4ECB\u7ECD" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">1</span>.&#8194;项目介绍</a></div>
<div class="tocblock tocblock2">
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-mmorpg" data-toc-depth="2" data-toc-line="[1.1]{.heading-label}.&#8194;MMORPG" style="toctarget:sec-mmorpg"><a href="#sec-mmorpg" class="localref"><span class="heading-label">1.1</span>.&#8194;MMORPG</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="section" data-toc-depth="2" data-toc-line="[1.2]{.heading-label}.&#8194;\u8FD0\u884C\u673A\u5236" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">1.2</span>.&#8194;运行机制</a></div></div>
<div class="tocitem tocitem1" data-toc-target-elem="h1" data-toc-target="section" data-toc-depth="1" data-toc-line="[2]{.heading-label}.&#8194;\u6E38\u620F\u9700\u6C42" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">2</span>.&#8194;游戏需求</a></div>
<div class="tocblock tocblock2">
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="section" data-toc-depth="2" data-toc-line="[2.1]{.heading-label}.&#8194;\u6E38\u620F\u6D41\u7A0B" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">2.1</span>.&#8194;游戏流程</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="section" data-toc-depth="2" data-toc-line="[2.2]{.heading-label}.&#8194;\u540D\u8BCD\u89E3\u91CA" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">2.2</span>.&#8194;名词解释</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="section" data-toc-depth="2" data-toc-line="[2.3]{.heading-label}.&#8194;\u6E38\u620F\u89C4\u5219" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">2.3</span>.&#8194;游戏规则</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="section" data-toc-depth="3" data-toc-line="[2.3.1]{.heading-label}.&#8194;\u7528\u6237\u4E0E\u89D2\u8272" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">2.3.1</span>.&#8194;用户与角色</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="section" data-toc-depth="3" data-toc-line="[2.3.2]{.heading-label}.&#8194;\u4E3B\u4E16\u754C" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">2.3.2</span>.&#8194;主世界</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="section" data-toc-depth="3" data-toc-line="[2.3.3]{.heading-label}.&#8194;\u526F\u672C" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">2.3.3</span>.&#8194;副本</a></div></div></div>
<div class="tocitem tocitem1" data-toc-target-elem="h1" data-toc-target="section" data-toc-depth="1" data-toc-line="[3]{.heading-label}.&#8194;\u529F\u80FD\u8BBE\u8BA1" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3</span>.&#8194;功能设计</a></div>
<div class="tocblock tocblock2">
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="section" data-toc-depth="2" data-toc-line="[3.1]{.heading-label}.&#8194;\u7528\u6237\u767B\u9646\u3001\u6CE8\u518C\u4E0E\u521B\u5EFA\u89D2\u8272" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.1</span>.&#8194;用户登陆、注册与创建角色</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="section" data-toc-depth="3" data-toc-line="[3.1.1]{.heading-label}.&#8194;\u7528\u6237\u767B\u5F55\u6CE8\u518C" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.1.1</span>.&#8194;用户登录注册</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="section" data-toc-depth="3" data-toc-line="[3.1.2]{.heading-label}.&#8194;\u7528\u6237\u5BC6\u7801\u5B89\u5168\u6027" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.1.2</span>.&#8194;用户密码安全性</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="section" data-toc-depth="3" data-toc-line="[3.1.3]{.heading-label}.&#8194;\u767B\u5F55\u72B6\u6001\u7684\u4FDD\u5B58" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.1.3</span>.&#8194;登录状态的保存</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="section" data-toc-depth="3" data-toc-line="[3.1.4]{.heading-label}.&#8194;\u5BC6\u7801\u627E\u56DE\u529F\u80FD" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.1.4</span>.&#8194;密码找回功能</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="section" data-toc-depth="3" data-toc-line="[3.1.5]{.heading-label}.&#8194;\u89D2\u8272\u7684\u521B\u5EFA" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.1.5</span>.&#8194;角色的创建</a></div></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="section" data-toc-depth="2" data-toc-line="[3.2]{.heading-label}.&#8194;\u89D2\u8272\u4EA4\u4E92" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.2</span>.&#8194;角色交互</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="section" data-toc-depth="3" data-toc-line="[3.2.1]{.heading-label}.&#8194;\u5BFC\u822A\u4E0E\u4E8B\u4EF6\u89E6\u53D1" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.2.1</span>.&#8194;导航与事件触发</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="section" data-toc-depth="3" data-toc-line="[3.2.2]{.heading-label}.&#8194;\u5176\u4ED6\u64CD\u4F5C" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.2.2</span>.&#8194;其他操作</a></div></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="section" data-toc-depth="2" data-toc-line="[3.3]{.heading-label}.&#8194;\u8D2D\u4E70\u4E0E\u5145\u503C" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.3</span>.&#8194;购买与充值</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="section" data-toc-depth="3" data-toc-line="[3.3.1]{.heading-label}.&#8194;\u5546\u5E97\u8D2D\u7269" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.3.1</span>.&#8194;商店购物</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="section" data-toc-depth="3" data-toc-line="[3.3.2]{.heading-label}.&#8194;\u4EBA\u6C11\u5E01\u5145\u503C" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.3.2</span>.&#8194;人民币充值</a></div></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="section" data-toc-depth="2" data-toc-line="[3.4]{.heading-label}.&#8194;\u9053\u5177\u4E0E\u88C5\u5907" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.4</span>.&#8194;道具与装备</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="section" data-toc-depth="2" data-toc-line="[3.5]{.heading-label}.&#8194;\u526F\u672C\u4E0E\u5956\u52B1" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.5</span>.&#8194;副本与奖励</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="section" data-toc-depth="2" data-toc-line="[3.6]{.heading-label}.&#8194;\u591A\u4EBA\u8054\u673A" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">3.6</span>.&#8194;多人联机</a></div></div>
<div class="tocitem tocitem1" data-toc-target-elem="h1" data-toc-target="section" data-toc-depth="1" data-toc-line="[4]{.heading-label}.&#8194;\u6570\u636E\u5E93\u8BBE\u8BA1" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">4</span>.&#8194;数据库设计</a></div>
<div class="tocblock tocblock2">
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec--" data-toc-depth="2" data-toc-line="[4.1]{.heading-label}.&#8194;\u5B9E\u4F53-\u5173\u7CFB\u6A21\u578B" style="toctarget:sec--"><a href="#sec--" class="localref"><span class="heading-label">4.1</span>.&#8194;实体-关系模型</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="section" data-toc-depth="2" data-toc-line="[4.2]{.heading-label}.&#8194;\u6570\u636E\u5E93\u8868\u7ED3\u6784" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">4.2</span>.&#8194;数据库表结构</a></div></div>
<div class="tocitem tocitem1" data-toc-target-elem="h1" data-toc-target="section" data-toc-depth="1" data-toc-line="[5]{.heading-label}.&#8194;\u6280\u672F\u548C\u73AF\u5883\u5206\u6790" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">5</span>.&#8194;技术和环境分析</a></div>
<div class="tocblock tocblock2">
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="section" data-toc-depth="2" data-toc-line="[5.1]{.heading-label}.&#8194;\u5F00\u53D1\u6280\u672F" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">5.1</span>.&#8194;开发技术</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="section" data-toc-depth="3" data-toc-line="[5.1.1]{.heading-label}.&#8194;\u524D\u7AEF" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">5.1.1</span>.&#8194;前端</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="section" data-toc-depth="3" data-toc-line="[5.1.2]{.heading-label}.&#8194;\u540E\u7AEF" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">5.1.2</span>.&#8194;后端</a></div></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="section" data-toc-depth="2" data-toc-line="[5.2]{.heading-label}.&#8194;\u5F00\u53D1\u73AF\u5883" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">5.2</span>.&#8194;开发环境</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="section" data-toc-depth="2" data-toc-line="[5.3]{.heading-label}.&#8194;\u751F\u4EA7\u73AF\u5883" style="toctarget:section"><a href="#section" class="localref"><span class="heading-label">5.3</span>.&#8194;生产环境</a></div></div></div></nav><h2 id="section" class="h1" data-line="7" data-heading-depth="1" style="display:block"><span data-line="7"></span><span class="heading-before"><span class="heading-label">1</span>.&#8194;</span><span data-line="7"></span>项目介绍</h2><h3 id="sec-mmorpg" class="h2" data-line="9" data-heading-depth="2" style="display:block"><span data-line="9"></span><span class="heading-before"><span class="heading-label">1.1</span>.&#8194;</span><span data-line="9"></span>MMORPG</h3>
<p class="p noindent" data-line="11"><span data-line="11"></span>MMORPG，是英文Massive（或Massively）Multiplayer Online Role-PlayingGame的缩写。至今尚未有<span data-line="11"></span><a href="https://baike.baidu.com/item/MMORPG">MMORPG</a><span data-line="11"></span>的正式中文译名，而在中国比较常见的译法则是<span data-line="11"></span>&#8220;大型多人在线角色扮演游戏&#8221;<span data-line="11"></span>，是网络游戏的一种。在所有角色扮演游戏中，玩家都要扮演一个虚构角色，并控制该角色的许多活动。
</p><h3 id="section" class="h2" data-line="13" data-heading-depth="2" style="display:block"><span data-line="13"></span><span class="heading-before"><span class="heading-label">1.2</span>.&#8194;</span><span data-line="13"></span>运行机制</h3>
<p class="p noindent" data-line="15"><span data-line="15"></span>MMORPG分为客户端和服务器两部分。我们使用浏览器作为客户端。玩家从客户端通过互联网连接，登陆服务器端后才能进行游戏。
</p>
<p class="p indent" data-line="17"><span data-line="17"></span>玩家的资料保存在服务器端。游戏的过程，是玩家扮演的角色和其他玩家控制的角色在网络虚拟空间中实时互动。而非玩家扮演的角色（即NPC）则往往是在游戏中提供特殊服务的人物，如销售虚拟物品，提供任务等。
</p>
<p class="p indent" data-line="19"><span data-line="19"></span>我们提供服务器供玩家游戏，负责管理游戏中的虚拟世界，并不断为游戏做出更新，以便留住玩家以及吸引其他人来玩这款游戏。
</p><h2 id="section" class="h1" data-line="21" data-heading-depth="1" style="display:block"><span data-line="21"></span><span class="heading-before"><span class="heading-label">2</span>.&#8194;</span><span data-line="21"></span>游戏需求</h2><h3 id="section" class="h2" data-line="23" data-heading-depth="2" style="display:block"><span data-line="23"></span><span class="heading-before"><span class="heading-label">2.1</span>.&#8194;</span><span data-line="23"></span>游戏流程</h3>
<p class="p noindent" data-line="25"><span data-line="25"></span>每一个<span data-line="25"></span><strong class="strong-star2">用户</strong><span data-line="25"></span>创建自己的<span data-line="25"></span><strong class="strong-star2">角色</strong><span data-line="25"></span>。系统内置了<span data-line="25"></span><strong class="strong-star2">怪物</strong><span data-line="25"></span>，角色可以<span data-line="25"></span><strong class="strong-star2">组队</strong><span data-line="25"></span>进入<span data-line="25"></span><strong class="strong-star2">副本</strong><span data-line="25"></span>攻击<span data-line="25"></span><strong class="strong-star2">怪物</strong><span data-line="25"></span>获得各种奖励。 角色还可以在地图上的<span data-line="25"></span><strong class="strong-star2">商店</strong><span data-line="25"></span>购物，相互添加<span data-line="25"></span><strong class="strong-star2">好友</strong><span data-line="25"></span>。<span data-line="25"></span><strong class="strong-star2">队伍</strong><span data-line="25"></span>之间可以发起对战。
</p><h3 id="section" class="h2" data-line="27" data-heading-depth="2" style="display:block"><span data-line="27"></span><span class="heading-before"><span class="heading-label">2.2</span>.&#8194;</span><span data-line="27"></span>名词解释</h3>
<dl class="dl loose" data-line="29">
<dt class="dt noindent dl-li loose-li" style="text-indent:0em;font-weight:bold">角色</dt>
<dd class="dd" data-line="29" style="margin-left:1.5em">
<p data-line="29"><span data-line="29"></span>角色是玩家进行游戏的载体，玩家操控角色在游戏中行动。
</p></dd>
<dd class="dd" data-line="31" style="margin-left:1.5em">
<p data-line="31"><span data-line="31"></span>角色拥有一系列属性，包括昵称、生命值(HP)、攻击力、防御力、经验值、金钱。
</p></dd>
<dt class="dt noindent dl-li loose-li" style="text-indent:0em;font-weight:bold">好友</dt>
<dd class="dd" data-line="33" style="margin-left:1.5em">
<p data-line="33"><span data-line="33"></span>好友是两个角色之间的对等关系，互为好友的两个角色可以更快的找到对方。
</p></dd>
<dt class="dt noindent dl-li loose-li" style="text-indent:0em;font-weight:bold">仓库</dt>
<dd class="dd" data-line="36" style="margin-left:1.5em">
<p data-line="36"><span data-line="36"></span>一个角色拥有多个仓库，仓库中可以存储角色的物品（包括装备和道具）。 角色在攻打副本时不可以访问仓库。
</p></dd>
<dt class="dt noindent dl-li loose-li" style="text-indent:0em;font-weight:bold">背包</dt>
<dd class="dd" data-line="39" style="margin-left:1.5em">
<p data-line="39"><span data-line="39"></span>一个角色有且只有一个背包，用于在攻打副本时携带所需物品。
</p></dd>
<dt class="dt noindent dl-li loose-li" style="text-indent:0em;font-weight:bold">道具</dt>
<dd class="dd" data-line="42" style="margin-left:1.5em">
<p data-line="42"><span data-line="42"></span>道具是能够在一次攻打副本期间对玩家某项数值进行增强的物品。
</p></dd>
<dt class="dt noindent dl-li loose-li" style="text-indent:0em;font-weight:bold">装备</dt>
<dd class="dd" data-line="45" style="margin-left:1.5em">
<p data-line="45"><span data-line="45"></span>装备分为剑、盾、铠甲三种，可以提升角色的部分属性值。角色不能装备一件以上的同种装备。
</p></dd>
<dt class="dt noindent dl-li loose-li" style="text-indent:0em;font-weight:bold">宠物</dt>
<dd class="dd" data-line="48" style="margin-left:1.5em">
<p data-line="48"><span data-line="48"></span>角色可以饲养宠物(从商店购买)，宠物会跟随在玩家身后，但只有装饰作用。
</p></dd>
<dt class="dt noindent dl-li loose-li" style="text-indent:0em;font-weight:bold">队伍</dt>
<dd class="dd" data-line="51" style="margin-left:1.5em">
<p data-line="51"><span data-line="51"></span>一支队伍由一个或更多玩家组成，并有一个队长。队伍可以攻打副本。
</p></dd>
<dt class="dt noindent dl-li loose-li" style="text-indent:0em;font-weight:bold">副本</dt>
<dd class="dd" data-line="54" style="margin-left:1.5em">
<p data-line="54"><span data-line="54"></span>副本是一张地图。副本中有怪物，角色可以在副本中攻击怪物并得到奖励。
</p></dd>
<dt class="dt noindent dl-li loose-li" style="text-indent:0em;font-weight:bold">主世界</dt>
<dd class="dd" data-line="57" style="margin-left:1.5em">
<p data-line="57"><span data-line="57"></span>主世界是一张地图。角色可以在主世界访问商店、仓库或进入副本。
</p></dd>
<dt class="dt noindent dl-li loose-li" style="text-indent:0em;font-weight:bold">地图</dt>
<dd class="dd" data-line="60" style="margin-left:1.5em">
<p data-line="60"><span data-line="60"></span>地图是一个二维矩阵，每一格被分配了地形。角色可以在地图中移动并触发事件。
</p></dd>
<dt class="dt noindent dl-li loose-li" style="text-indent:0em;font-weight:bold">金币</dt>
<dd class="dd" data-line="63" style="margin-left:1.5em">
<p data-line="63"><span data-line="63"></span>游戏中的虚拟货币。
</p></dd></dl><h3 id="section" class="h2" data-line="66" data-heading-depth="2" style="display:block"><span data-line="66"></span><span class="heading-before"><span class="heading-label">2.3</span>.&#8194;</span><span data-line="66"></span>游戏规则</h3><h4 id="section" class="h3" data-line="68" data-heading-depth="3" style="display:block"><span data-line="68"></span><span class="heading-before"><span class="heading-label">2.3.1</span>.&#8194;</span><span data-line="68"></span>用户与角色</h4>
<p class="p noindent" data-line="70"><span data-line="70"></span>用户登录后，可以选择创建角色，如果已有角色，可以销毁角色或使用该角色进入游戏。
</p>
<p class="p indent" data-line="72"><span data-line="72"></span>角色有三个装备槽——剑、盾、铠甲。每个槽只能装备一件装备。
</p>
<p class="p indent" data-line="74"><span data-line="74"></span>角色可以申请与其他角色结为好友，若对方同意，则将对方加入双方的好友列表。
</p><h4 id="section" class="h3" data-line="76" data-heading-depth="3" style="display:block"><span data-line="76"></span><span class="heading-before"><span class="heading-label">2.3.2</span>.&#8194;</span><span data-line="76"></span>主世界</h4>
<p class="p noindent" data-line="78"><span data-line="78"></span>所有在线玩家位于主地图或副本地图。 角色进入游戏后，出生于主地图随机位置。
</p>
<p class="p indent" data-line="80"><span data-line="80"></span>角色可以通过商店购买/出售可交易物品，可交易物品包括所有装备、道具、宠物。
</p>
<p class="p indent" data-line="82"><span data-line="82"></span>角色可以通过副本入口点进入对应的副本。
</p>
<p class="p indent" data-line="84"><span data-line="84"></span>道具可以在仓库与背包之间转移。
</p>
<p class="p indent" data-line="86"><span data-line="86"></span>用户可以通过界面内菜单进行人民币充值，1元=100金币。
</p><h4 id="section" class="h3" data-line="88" data-heading-depth="3" style="display:block"><span data-line="88"></span><span class="heading-before"><span class="heading-label">2.3.3</span>.&#8194;</span><span data-line="88"></span>副本</h4>
<p class="p noindent" data-line="90"><span data-line="90"></span>怪物在且仅在副本中出现。 角色尝试进入怪物所在格子时视为发动攻击，参照战斗规则。 如果怪兽在战斗中死亡，会在自己周围 3<span data-line="90"></span>*<span data-line="90"></span>3 的方格内掉落物品，包括装备与道具。
</p>
<p class="p indent" data-line="92"><span data-line="92"></span>战斗规则：
</p>
<ol class="ol compact" data-line="94">
<li class="li ol-li compact-li" data-line="94"><span data-line="94"></span>发起战斗的一方先进行攻击，令攻击方为A，防御方为B。
</li>
<li class="li ol-li compact-li" data-line="95"><span data-line="95"></span>每次攻击， A 对 B 的 HP 造成 A攻击<span data-line="95"></span> <span data-line="95"></span>- B防御 点伤害。
</li>
<li class="li ol-li compact-li" data-line="96"><span data-line="96"></span>一次攻击结束后，攻击与防御方交换，进行下一轮攻击。
</li>
<li class="li ol-li compact-li" data-line="97"><span data-line="97"></span>有一方的 HP 小于等于 0 时，战斗结束。
</li></ol>

<p class="p noindent" data-line="99"><span data-line="99"></span>角色可以在非战斗时刻使用道具。
</p><h2 id="section" class="h1" data-line="102" data-heading-depth="1" style="display:block"><span data-line="102"></span><span class="heading-before"><span class="heading-label">3</span>.&#8194;</span><span data-line="102"></span>功能设计</h2>
<p class="p noindent" data-line="104"><span data-line="104"></span>下面是根据上文给出的需求分析得到的软件功能要求。
</p><h3 id="section" class="h2" data-line="106" data-heading-depth="2" style="display:block"><span data-line="106"></span><span class="heading-before"><span class="heading-label">3.1</span>.&#8194;</span><span data-line="106"></span>用户登陆、注册与创建角色</h3><h4 id="section" class="h3" data-line="108" data-heading-depth="3" style="display:block"><span data-line="108"></span><span class="heading-before"><span class="heading-label">3.1.1</span>.&#8194;</span><span data-line="108"></span>用户登录注册</h4>
<p class="p noindent" data-line="110"><span data-line="110"></span>登录注册页面前端部分内容，关注的重点还是用户账号和密码在js代码里要做对应正则的匹配，这是验证的第一步，保证用户输入格式的正确性同时也从一方面减少用户向后台发送没必要的错误请求。前端向后端请求的方式使用POST。 在后台接收前端传送的信息同样要经过验证正则的规则匹配步骤，因为有可能一些人并不是通过合法的方式进行访问，可以减少没必要的数据库查询。
</p><h4 id="section" class="h3" data-line="112" data-heading-depth="3" style="display:block"><span data-line="112"></span><span class="heading-before"><span class="heading-label">3.1.2</span>.&#8194;</span><span data-line="112"></span>用户密码安全性</h4>
<p class="p noindent" data-line="114"><span data-line="114"></span>密码要如何保存， 明文存入数据库？当然非常非常非常不推荐， 由于大多数客户的习惯都是使用相同的密码， 如果明文在发生信息泄露的情况下容易发生撞库的事情。所以在密码的保存上最好在后台使用“密钥<span data-line="114"></span> <span data-line="114"></span>+ 不可逆加密算” 如 sha1，sha256等有hash算法的不逆的加密算法进行加密后再存入数据库。
</p><h4 id="section" class="h3" data-line="116" data-heading-depth="3" style="display:block"><span data-line="116"></span><span class="heading-before"><span class="heading-label">3.1.3</span>.&#8194;</span><span data-line="116"></span>登录状态的保存</h4>
<p class="p noindent" data-line="118"><span data-line="118"></span>由于http协议是无状态的， 所以要记录用户的登录状态就要靠后台相应数据的维护来记录， 我们通常都是登录成功后在seesion中保存登录用户， 然后将用户登录通过cookie返回到客户端， 通过比对cookie和seesion信息来验证用户是否登录。
</p><h4 id="section" class="h3" data-line="120" data-heading-depth="3" style="display:block"><span data-line="120"></span><span class="heading-before"><span class="heading-label">3.1.4</span>.&#8194;</span><span data-line="120"></span>密码找回功能</h4>
<p class="p noindent" data-line="122"><span data-line="122"></span>因为后台密码是加密没法提供明文密码的找回， 所有可以设计通过手机短信验证或者邮箱验证， 验证成功后通过直接设置新密码的形式来进行， 对于重置密码的url地址为了安全起见要通过加入时间戳和唯一随机数来保证这个链接只在某个事件内有效， 如果在密码修改成功或者事件过期， 就把这个唯一随机数给删除， 保存密码方式同上。
</p><h4 id="section" class="h3" data-line="124" data-heading-depth="3" style="display:block"><span data-line="124"></span><span class="heading-before"><span class="heading-label">3.1.5</span>.&#8194;</span><span data-line="124"></span>角色的创建</h4>
<p class="p noindent" data-line="126"><span data-line="126"></span>一个用户只能创建一名角色，而且没有角色的用户无法进行游戏。 因此可以让用户在创建账号后立即进行角色的创建。 在前端让用户挑选自己喜欢的皮肤与特性等角色属性，将数据传给后端存入数据库。 角色创建后直接进入游戏。 一般不希望用户经常修改角色，因此将删除角色的功能放在进入游戏后的设置界面内。
</p><h3 id="section" class="h2" data-line="128" data-heading-depth="2" style="display:block"><span data-line="128"></span><span class="heading-before"><span class="heading-label">3.2</span>.&#8194;</span><span data-line="128"></span>角色交互</h3><h4 id="section" class="h3" data-line="130" data-heading-depth="3" style="display:block"><span data-line="130"></span><span class="heading-before"><span class="heading-label">3.2.1</span>.&#8194;</span><span data-line="130"></span>导航与事件触发</h4>
<p class="p noindent" data-line="132"><span data-line="132"></span>秉承简单的原则，基本只使用上下左右四个按钮。 玩家通过上下左右在地图上移动，如果玩家尝试进入某个特殊的格子（例如怪兽所在的格子、商店所在的格子），就触发事件。 可以触发的事件包括：
</p>
<ul class="ul list-star compact" data-line="134">
<li class="li ul-li list-star-li compact-li" data-line="134"><span data-line="134"></span>与怪兽战斗
</li>
<li class="li ul-li list-star-li compact-li" data-line="135"><span data-line="135"></span>打开商店界面
</li>
<li class="li ul-li list-star-li compact-li" data-line="136"><span data-line="136"></span>打开仓库界面
</li>
<li class="li ul-li list-star-li compact-li" data-line="137"><span data-line="137"></span>进入副本
</li>
<li class="li ul-li list-star-li compact-li" data-line="138"><span data-line="138"></span>拾取物品
</li>
<li class="li ul-li list-star-li compact-li" data-line="139"><span data-line="139"></span>离开副本
</li></ul>
<h4 id="section" class="h3" data-line="141" data-heading-depth="3" style="display:block"><span data-line="141"></span><span class="heading-before"><span class="heading-label">3.2.2</span>.&#8194;</span><span data-line="141"></span>其他操作</h4>
<p class="p noindent" data-line="143"><span data-line="143"></span>出去导航时出发的时间，角色还能进行许多其他操作，通过前端 UI 引导，使用鼠标完成。 这些操作主要与其他玩家交互、道具与装备的使用与转移、在商店购买有关。 这些操作会在后面详细说明。
</p><h3 id="section" class="h2" data-line="145" data-heading-depth="2" style="display:block"><span data-line="145"></span><span class="heading-before"><span class="heading-label">3.3</span>.&#8194;</span><span data-line="145"></span>购买与充值</h3><h4 id="section" class="h3" data-line="147" data-heading-depth="3" style="display:block"><span data-line="147"></span><span class="heading-before"><span class="heading-label">3.3.1</span>.&#8194;</span><span data-line="147"></span>商店购物</h4>
<p class="p noindent" data-line="149"><span data-line="149"></span>游戏中的虚拟货币称为金币。 玩家通过导航进入商店后，会弹出商店菜单。 游戏设定为在商店中可以无限量购买或出售所有的物品，包括宠物、装备与道具。 因此不必存储商店中的库存余量。 前端需要按照分类展示所有的物品，玩家根据需要将要购买的物品加入购物清单，清单在加入第一个物品时自动生成。 清单显示在一个单独的窗口中，并实时计算当前所有物品的金币数。 在玩家选择完毕后，可以进行结算，从玩家余额中扣除相应的金币，并向玩家对应的仓库中添加所购买的物品，这是前端与后端进行数据传递的一步。
</p><h4 id="section" class="h3" data-line="151" data-heading-depth="3" style="display:block"><span data-line="151"></span><span class="heading-before"><span class="heading-label">3.3.2</span>.&#8194;</span><span data-line="151"></span>人民币充值</h4>
<p class="p noindent" data-line="153"><span data-line="153"></span>玩家获取金币有两种途径，一是攻打副本时怪物掉落以及副本奖励，一是通过人民币充值。 由于涉及到金钱交易，处理需要十分谨慎，在后端采用数据库事务模式。 与各种支付平台对接，使得用户可以通过多种方式支付。
</p><h3 id="section" class="h2" data-line="155" data-heading-depth="2" style="display:block"><span data-line="155"></span><span class="heading-before"><span class="heading-label">3.4</span>.&#8194;</span><span data-line="155"></span>道具与装备</h3>
<p class="p noindent" data-line="157"><span data-line="157"></span>设计道具与装备是为了丰富游戏内容，增强玩家的体验。
</p>
<p class="p indent" data-line="159"><span data-line="159"></span>道具用于在副本中使用，增加玩家的生命值或攻击力。 玩家有两个容器可以存储道具：仓库与背包。 玩家的所有道具都可以存储在仓库中，但是在副本中无法访问仓库，要将道具放入背包（可容纳的数量有限）带入副本才可以使用。 因此要设计两个展示界面：仓库与背包，仓库在主界面通过导航事件访问，背包可以在游戏界面下方的状态栏打开。 玩家在仓库界面时可以浏览自己拥有的所有道具，也可以在仓库和背包之间转移物品。 在攻打副本时，可以打开背包并使用其中的道具。 同时，在攻打副本过程中获得的战利品也会被放入背包。
</p>
<p class="p indent" data-line="161"><span data-line="161"></span>装备可以提升玩家的属性，分为剑、盾、铠甲三类。 玩家同一时间只能装备一把剑、一面盾和一身铠甲。 装备只能放置在仓库中，如果在副本中获得了装备会被传送到仓库。 玩家可以在浏览仓库时选择某件装备并穿上。
</p>
<p class="p indent" data-line="163"><span data-line="163"></span>仓库分为装备仓库和道具仓库两种，玩家可以自行创建新的仓库（为了方便对物品进行分类）。
</p><h3 id="section" class="h2" data-line="165" data-heading-depth="2" style="display:block"><span data-line="165"></span><span class="heading-before"><span class="heading-label">3.5</span>.&#8194;</span><span data-line="165"></span>副本与奖励</h3>
<p class="p noindent" data-line="167"><span data-line="167"></span>玩家可以攻打副本并获得奖励，这也是用户玩游戏的主要动机。 怪兽只出现在副本中，玩家可以在主世界内与其它玩家组队并攻打副本，通过杀死副本内的怪兽来得到奖励。 按照设定，副本指某一个特定的含有怪物的地图。 副本对每一个队伍是独立的，也就是说一支队伍攻打副本并不会对队伍以外的玩家造成任何影响。 副本和主世界一样，都是一张地图，因此采用与主世界相同的显示模块，但是增加了触发战斗的导航事件。
</p>
<p class="p indent" data-line="169"><span data-line="169"></span>队伍进入副本所在位置便可以攻打副本，这时从数据库查询对应副本的地图并返回给前端，前端通过后端同步其它在线玩家的位置信息，并在拾取战利品时修改数据库。
</p><h3 id="section" class="h2" data-line="171" data-heading-depth="2" style="display:block"><span data-line="171"></span><span class="heading-before"><span class="heading-label">3.6</span>.&#8194;</span><span data-line="171"></span>多人联机</h3>
<p class="p noindent" data-line="173"><span data-line="173"></span>进行多人联机需要获取所有其他玩家的状态（位置、朝向、动作等），这样的同步通过在后端记录在线玩家的状态完成。 这些状态并不需要被存入数据库，因为没有持久化的必要。 前端每隔一定时间就与后端进行同步，来更新所有玩家的状态。
</p>
<p class="p indent" data-line="175"><span data-line="175"></span>除了在地图上显示所有在线玩家，还有与其他玩家互动的需求。 为此，设置一个消息箱，玩家 A 希望与玩家 B 组队或结为好友时，可以发送消息，玩家 B 看到消息后即可做出应答。
</p><h2 id="section" class="h1" data-line="177" data-heading-depth="1" style="display:block"><span data-line="177"></span><span class="heading-before"><span class="heading-label">4</span>.&#8194;</span><span data-line="177"></span>数据库设计</h2><h3 id="sec--" class="h2" data-line="179" data-heading-depth="2" style="display:block"><span data-line="179"></span><span class="heading-before"><span class="heading-label">4.1</span>.&#8194;</span><span data-line="179"></span>实体-关系模型</h3><h3 id="section" class="h2" data-line="181" data-heading-depth="2" style="display:block"><span data-line="181"></span><span class="heading-before"><span class="heading-label">4.2</span>.&#8194;</span><span data-line="181"></span>数据库表结构</h3><h2 id="section" class="h1" data-line="183" data-heading-depth="1" style="display:block"><span data-line="183"></span><span class="heading-before"><span class="heading-label">5</span>.&#8194;</span><span data-line="183"></span>技术和环境分析</h2><h3 id="section" class="h2" data-line="185" data-heading-depth="2" style="display:block"><span data-line="185"></span><span class="heading-before"><span class="heading-label">5.1</span>.&#8194;</span><span data-line="185"></span>开发技术</h3><h4 id="section" class="h3" data-line="187" data-heading-depth="3" style="display:block"><span data-line="187"></span><span class="heading-before"><span class="heading-label">5.1.1</span>.&#8194;</span><span data-line="187"></span>前端</h4>
<ul class="ul list-star compact" data-line="189">
<li class="li ul-li list-star-li compact-li" data-line="189"><span data-line="189"></span>HTML
</li>
<li class="li ul-li list-star-li compact-li" data-line="190"><span data-line="190"></span>CSS
</li>
<li class="li ul-li list-star-li compact-li" data-line="191"><span data-line="191"></span>JS (Vue.js)
</li></ul>
<h4 id="section" class="h3" data-line="193" data-heading-depth="3" style="display:block"><span data-line="193"></span><span class="heading-before"><span class="heading-label">5.1.2</span>.&#8194;</span><span data-line="193"></span>后端</h4>
<ul class="ul list-star compact" data-line="195">
<li class="li ul-li list-star-li compact-li" data-line="195"><span data-line="195"></span>Web服务器： uWSGI
</li>
<li class="li ul-li list-star-li compact-li" data-line="196"><span data-line="196"></span>Web应用： Django 2.1.4
</li></ul>
<h3 id="section" class="h2" data-line="198" data-heading-depth="2" style="display:block"><span data-line="198"></span><span class="heading-before"><span class="heading-label">5.2</span>.&#8194;</span><span data-line="198"></span>开发环境</h3>
<p class="p noindent" data-line="200"><span data-line="200"></span>Windows 10
</p><h3 id="section" class="h2" data-line="202" data-heading-depth="2" style="display:block"><span data-line="202"></span><span class="heading-before"><span class="heading-label">5.3</span>.&#8194;</span><span data-line="202"></span>生产环境</h3>
<ul class="ul list-star compact" data-line="204">
<li class="li ul-li list-star-li compact-li" data-line="204"><span data-line="204"></span>阿里云服务器 CentOS 7.4
</li>
<li class="li ul-li list-star-li compact-li" data-line="205"><span data-line="205"></span>CPU ：1核 Xeon E5 
</li>
<li class="li ul-li list-star-li compact-li" data-line="206"><span data-line="206"></span>硬盘：40G SSD
</li>
<li class="li ul-li list-star-li compact-li" data-line="207"><span data-line="207"></span>内存：2G
</li></ul>
<span data-line=""></span></div>
</body>

</html>
